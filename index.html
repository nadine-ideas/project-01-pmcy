<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Mental da Arquitetura de Integração PAMCARY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Fundo muito escuro (GitHub Dark) */
            min-height: 100vh;
        }
        .node {
            padding: 1rem;
            border-radius: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            margin: 0.75rem 0; /* Espaçamento ajustado */
            cursor: default;
        }
        .node:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.7);
        }

        /* 1. Introdução/Título (Main Node) */
        .main-node {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6); /* Gradiente Azul */
            color: white;
            font-weight: 800;
            border: 4px solid #93c5fd;
            animation: pulse 2s infinite;
            margin-top: 1rem;
        }
        .objective-macro-node {
            background-color: #047857; /* Verde Escuro Sólido */
            border: 1px solid #34d399;
            color: #d1fae5;
        }
        
        /* Estilos de Pilar e Objetivo */
        .pillar-node {
            background-color: #1f2937; /* Dark gray */
            color: #f97316; /* Cor do título - Laranja */
            font-weight: 800;
            border-left: 5px solid #f97316; /* Marker Laranja */
            margin-bottom: 0; 
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }
        .objective-node {
            background-color: #4d2d0b; /* Marrom escuro para objetivo */
            color: #fcd34d; /* Amarelo claro para destaque */
            font-size: 0.95rem;
            font-weight: 600;
            border-left: 5px solid #fbbf24; /* Marker Amarelo */
            margin: 0;
            border-top-left-radius: 0;
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        /* Sub-Nodes (Boxes de Informação) */
        .sub-node-box {
            background-color: #1a202c; /* Fundo mais escuro para a caixa de sub-nodes */
            padding: 0.75rem;
            border-radius: 0 0 1rem 1rem; /* Borda arredondada apenas na parte inferior */
            border: 1px solid #374151;
            border-top: none;
        }
        .sub-node-item {
            background-color: #374151; /* Lighter dark gray */
            color: #e5e7eb;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            padding: 0.75rem; /* Padding reduzido */
            border-radius: 0.5rem;
            border-left: 3px solid #10b981; /* Green marker default */
        }

        /* Animação */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }

        /* Responsive Layout for Mind Map */
        @media (min-width: 1024px) {
            .mind-map-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .main-map-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1.5rem; /* Reduz o espaçamento vertical entre as seções principais */
            }
        }
        @media (max-width: 1023px) {
            .mind-map-grid {
                grid-template-columns: 1fr;
            }
        }

    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-7xl mx-auto main-map-container">
                <div class="node main-node text-center w-full lg:w-2/3 text-2xl">
            ARQUITETURA DE INTEGRAÇÃO PAMCARY
            <div class="text-base font-normal mt-1 opacity-90">(Expansão e Formalização do RD Station CRM)</div>
        </div>

                <div class="node objective-macro-node text-center w-full lg:w-2/3 p-4">
            <span class="text-xl font-extrabold text-white">OBJETIVOS ESTRATÉGICOS (MACRO)</span>
            <ul class="list-disc list-inside text-sm mt-3 space-y-1 text-left mx-auto w-fit font-normal">
                <li>Escalar o RD CRM para DICOM II e DICOM IV.</li>
                <li>Formalizar a Camada de Intermediação (iPaaS) na Fase 3.</li>
                <li>Substituir trabalho manual de ETL (DE/PARA) por automação via integração.</li>
            </ul>
        </div>
        
                <div class="node text-left w-full lg:w-2/3 bg-gray-800/80 border border-gray-600 text-gray-200 font-semibold p-4">            
            <p class="text-xl font-extrabold text-white mb-3">🔗 Links Importantes</p>            
            <p class="text-sm mb-4">                
                <span class="text-yellow-400 font-extrabold">🚨 NOTA DO ANALISTA:</span> Por favor, leia atentamente o <a href="https://docs.google.com/document/d/1sP085Bb-Pb4xUkrrj23Rqrk8LGlbgBndLwU_gfKYGpw/edit?tab=t.0" target="_blank" class="doc-link text-red-300 hover:text-red-200">Bloco de Notas</a> e os demais documentos abaixo para ter a visão completa do escopo e do histórico de decisões.            
            </p>            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 text-sm">
                
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">Contexto/Escopo:</span> <a href="https://docs.google.com/document/d/1sP085Bb-Pb4xUkrrj23Rqrk8LGlbgBndLwU_gfKYGpw/edit?tab=t.0" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">[Pamcary] Bloco de Notas</a>
                </div>
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">Cronograma de Implantação:</span> <a href="https://docs.google.com/spreadsheets/d/1FnTWSFNTkiWrr_rcuz1nRu-eICKC_MBO1KLJYdYSNP0/edit?gid=2122682714#gid=2122682714" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Cronograma</a>
                </div>
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">Kick Off Oficial:</span> <a href="https://docs.google.com/presentation/d/1bx4MCP6A2S_pD5j06_W1PADP8xbkw_56lNWhOXofr_g/edit?slide=id.g363eca2070b_0_546#slide=id.g363eca2070b_0_546" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">[Pamcary] Kick Off</a>
                </div>

                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">Arq. Técnica:</span> <a href="https://drive.google.com/file/d/1lfds5twbs-ByF-GT-0XF575CnxRYv2ev/view?usp=drive_link" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Modelo de Arquitetura</a>
                </div>
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">Lev. Requisitos:</span> <a href="https://drive.google.com/file/d/1WBrMKBCGCprnZjhyTZ98q4OB1JSUGq1O/view?usp=drive_link" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Levantamento de Requisitos</a>
                </div>
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">Documentação Técnica (Pasta):</span> <a href="https://drive.google.com/drive/folders/14W1WT9fIq6s54lZLqbZ2yaPBZPOmE6Q2?usp=drive_link" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Pasta Drive</a>
                </div>
                
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">Setup Estratégico CRM:</span> <a href="https://www.figma.com/board/ZYLmrhTRdbLhJNyaPc7Una/Implanta%C3%A7%C3%A3o--PEACE-%7C-PAMCARY?node-id=2-2&p=f&t=9fr6vxQ3OpfVNTxa-0" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Figma Board (Setup)</a>
                </div>
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">DexPara (Hierarquia):</span> <a href="https://docs.google.com/spreadsheets/d/12XhPJ9ovm6kkWyTi3FK1z17-ZxtcjgCU/edit?usp=drive_link&ouid=104510550262560189119&rtpof=true&sd=true" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">DexPara HIERARQUIA</a>
                </div>
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300">
                    <span class="text-blue-400">Docs APIs (Reunião):</span> <a href="https://drive.google.com/file/d/18ltBSZtUyNi7YVzRLMBlgUrahXuVf3R0/view?usp=drive_link" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Docs. API</a>
                </div>
                
                <div class="p-2 bg-gray-900/50 rounded-lg border border-gray-700 hover:border-blue-500 transition duration-300 col-span-full md:col-span-3">
                    <span class="text-blue-400">Reuniões Comerciais Adicionais (Externo):</span> 
                    <a href="https://app.meetrox.ai/shared-calls/zgAemLeWYN5d5Z0v6V_pJA" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Call 1</a> | 
                    <a href="https://app.meetrox.ai/shared-calls/trUORFquzHVTxcJtd5fZ4g" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Call 2</a> |
                    <a href="https://app.meetrox.ai/shared-calls/i2ve7UK2bP72Xpp3LjmBWg" target="_blank" class="doc-link text-blue-300 hover:text-blue-100">Call 3</a>
                </div>
            </div>        
        </div>
       
                <div class="mind-map-grid grid gap-4 w-full mt-4">

                        <div class="flex flex-col">
                <div class="node pillar-node text-xl p-3">
                    1. SISTEMAS CENTRAIS E FUNIS (RD CRM)
                </div>
                <div class="node objective-node p-3">
                    <span class="font-extrabold">Objetivo Principal:</span> Garantir a escalabilidade e segregação das operações de vendas (funis e equipes) dentro do RD CRM para as novas diretorias (DICOM II e DICOM IV).
                </div>
                
                                <div class="sub-node-box space-y-2">
                    <div class="sub-node-item">
                        <span class="font-bold text-yellow-400">Escopo:</span> Escalar a implementação para <span class="text-white font-semibold">DICOM II & DICOM IV</span>.
                    </div>
                    <div class="sub-node-item">
                        <span class="font-bold text-yellow-400">Necessidade:</span> Criar novos funis e segregação de equipes (e.g., "Vendas Transporte DICOM II").
                    </div>
                    <div class="sub-node-item">
                        <span class="font-bold text-yellow-400">Desafio Atual:</span> Integração olha apenas o sufixo "Vendas Transportes", não segmenta por filial/diretoria.
                    </div>
                </div>
            </div>

                        <div class="flex flex-col">
                <div class="node pillar-node text-xl p-3">
                    2. INTEGRAÇÕES CHAVE (Sistemas Conectados)
                </div>
                <div class="node objective-node p-3">
                    <span class="font-extrabold">Objetivo Principal:</span> Automatizar a comunicação de dados entre o RD CRM e sistemas críticos (CRM Web e Quiver), eliminando a necessidade de processos manuais de DE/PARA.
                </div>
                
                                <div class="sub-node-box space-y-2">
                    <div class="sub-node-item border-l-3 border-l-sky-500">
                        <span class="font-bold text-sky-400">CRM Web (Interno):</span> Mapeamento automático do campo <span class="text-white font-semibold">Responsável</span> (Hierarquia), eliminando DE/PARA manual.
                    </div>
                    <div class="sub-node-item border-l-3 border-l-sky-500">
                        <span class="font-bold text-sky-400">Quiver (Externo):</span> Automatizar DE/PARA de <span class="text-white font-semibold">Campanha</span> e <span class="text-white font-semibold">Motivo de Perda</span> (Funil Caminhão - GEAVE).
                    </div>
                    <div class="sub-node-item border-l-3 border-l-sky-500">
                        <span class="font-bold text-sky-400">SIGS (Interno):</span> Comunicação direta (Cotação/Proposta) é uma <span class="text-white font-semibold">Ideia de Futuro</span>.
                    </div>
                </div>
            </div>

                        <div class="flex flex-col">
                <div class="node pillar-node text-xl p-3">
                    3. CAMADA DE INTEGRAÇÃO (iPaaS/Middleware)
                </div>
                <div class="node objective-node p-3">
                    <span class="font-extrabold">Objetivo Principal:</span> Formalizar e implementar uma camada de intermediação (iPaaS/Middleware) para centralizar a lógica de transformação de dados (DE/PARA) e garantir a segurança das APIs.
                </div>
                
                                <div class="sub-node-box space-y-2">
                    <div class="sub-node-item border-l-3 border-l-pink-500">
                        <span class="font-bold text-pink-400">Mecanismo:</span> APIs (Padrão <span class="text-white font-semibold">REST</span>) - Até 3 APIs na Fase 3.
                    </div>
                    <div class="sub-node-item border-l-3 border-l-pink-500">
                        <span class="font-bold text-pink-400">iPaaS:</span> Plataforma de Integração (Previsão: <span class="text-white font-semibold">Fase 3 do Onboarding</span>).
                    </div>
                    <div class="sub-node-item border-l-3 border-l-pink-500">
                        <span class="font-bold text-pink-400">Função Central:</span> Mapeamento e Transformação de Dados (DE/PARA).
                    </div>
                    <div class="sub-node-item border-l-3 border-l-pink-500">
                        <span class="font-bold text-pink-400">Segurança:</span> Autenticação via <span class="text-white font-semibold">MAAS</span> e <span class="text-white font-semibold">Keycloak</span> (Bearer/Basic).
                    </div>
                </div>
            </div>

                        <div class="flex flex-col">
                <div class="node pillar-node text-xl p-3">
                    4. MAPEAMENTO DE DADOS (DE/PARA) E REGRAS
                </div>
                <div class="node objective-node p-3">
                    <span class="font-extrabold">Objetivo Principal:</span> Substituir o trabalho manual de ETL por automação, implementando regras de DE/PARA que considerem as novas estruturas (Diretoria/Filial) e requisitos de campo (Customizados).
                </div>
                
                                <div class="sub-node-box space-y-2">
                    <div class="sub-node-item border-l-3 border-l-indigo-500">
                        <span class="font-bold text-indigo-400">Regra Hierarquia:</span> Incluir campos <span class="text-white font-semibold">Diretoria</span> e <span class="text-white font-semibold">Filial</span> no DE/PARA (<span class="text-sm italic">trds_depara_crm_hierarquia</span>).
                    </div>
                    <div class="sub-node-item border-l-3 border-l-indigo-500">
                        <span class="font-bold text-indigo-400">Regra Campanha/Motivo de Perda:</span> Permitir cadastro direto no RD (<span class="text-sm italic">trds_depara_crm_campanha/mot_perda</span>).
                    </div>
                    <div class="sub-node-item border-l-3 border-l-indigo-500">
                        <span class="font-bold text-indigo-400">Campos Personalizados:</span> Cruciais para integração (ex: endereço). Devem manter o formato do CRM Web e <span class="text-yellow-300 font-extrabold uppercase">NÃO podem usar autofill</span> (Google Maps).
                    </div>
                </div>
            </div>
           
        </div>                <div class="node text-left w-full lg:w-2/3 bg-gray-800/80 border border-gray-600 text-gray-200 p-4 mt-6">
            <p class="text-xl font-extrabold text-white mb-3">🖥️ Quais sistemas se integram com o RD?</p>
            <p class="text-sm font-light text-gray-300 mb-4">
                O RD Station CRM (RD) se integra com vários sistemas, sendo que o foco principal da integração atual e do projeto de onboarding é a comunicação com o sistema interno da Pamcary e um sistema externo de apólices.
            </p>
            <p class="text-sm font-light text-gray-300 mb-4">
                Os principais sistemas que se integram com o RD são:
            </p>
    
            <div class="space-y-5 text-sm font-normal text-gray-300">
                                <div>
                    <p class="text-lg font-bold text-blue-300 mb-2">Sistemas de Negócio e Operacionais</p>
                    
                    <p class="font-semibold text-yellow-400 mt-3">1. CRM Web (CRM Interno da Pamcary)</p>
                    <ul class="list-disc list-inside ml-4 space-y-1 mt-1">
                        <li>O CRM Web é um sistema interno da Pamcary.</li>
                        <li>A integração entre o RD CRM e o CRM Web é realizada para o Funil de Transportes (SEDEG).</li>
                        <li>Os dados são integrados entre o RD e o CRM Web com base em cadastros realizados em uma tabela.</li>
                        <li>Um dos objetivos do projeto é que, ao cadastrar um novo cliente no RD, a informação já integre automaticamente com o CRM Web, eliminando a necessidade de um cadastro duplicado.</li>
                        <li>O campo <span class="text-white font-semibold">Responsável</span> no RD, por exemplo, é associado a um código de hierarquia e a um código de setor no CRM Web. Essa comunicação está funcionando perfeitamente.</li>
                    </ul>
    
                    <p class="font-semibold text-yellow-400 mt-3">2. Quiver</p>
                    <ul class="list-disc list-inside ml-4 space-y-1 mt-1">
                        <li>O Quiver é um sistema externo de gerenciamento de apólices.</li>
                        <li>A integração com o Quiver é aplicada ao Funil Caminhão (GEAVE).</li>
                        <li>Quando a negociação avança para a etapa de cotação no RD, e os campos obrigatórios são preenchidos, um orçamento é aberto automaticamente no Quiver.</li>
                        <li>O Quiver retorna informações ao RD, como o status da negociação (ganha ou perdida), que atualiza a negociação no painel do RD.</li>
                        <li>A integração do Quiver envolve o campo <span class="text-white font-semibold">Campanha</span> e o <span class="text-white font-semibold">Motivo de Perda</span>, que atualmente dependem de uma tabela de DE/PARA para gerar o código correspondente.</li>
                    </ul>
    
                    <p class="font-semibold text-yellow-400 mt-3">3. SIGS (Sistema de Geração de Propostas)</p>
                    <ul class="list-disc list-inside ml-4 space-y-1 mt-1">
                        <li>O SIGS é um sistema interno da Pamcary utilizado para gerar a proposta personalizada, especialmente para o funil de Transportes.</li>
                        <li>Embora a proposta seja gerada no SIGS, a comunicação direta entre o RD e o SIGS é considerada uma <span class="text-white font-semibold">ideia de futuro</span>.</li>
                    </ul>
                </div>
    
                                <div>
                    <p class="text-lg font-bold text-blue-300 mb-2">Sistemas de Intermediação e Arquitetura</p>
                    <p class="mb-2">
                        A comunicação entre o RD e os sistemas alvo (CRM Web e Quiver) é feita via API. O projeto de onboarding prevê a implementação de uma camada de intermediação para otimizar o fluxo de dados e eliminar o trabalho manual de DE/PARA (de/para).
                    </p>
                    <p>Os componentes/ferramentas de arquitetura envolvidos são:</p>
                    <ul class="list-disc list-inside ml-4 space-y-1 mt-1">
                        <li><span class="text-white font-semibold">API (Application Programming Interface):</span> A integração é feita via API, que foi construída por uma consultoria externa. O projeto prevê a implementação de até 3 APIs e plugins na Fase 3 do projeto de Integração.</li>
                        <li><span class="text-white font-semibold">iPaaS (Integration Platform as a Service):</span> Planejado para ser instalado na Fase 3 do projeto de Integração.</li>
                        <li><span class="text-white font-semibold">Banco de Dados Próprio da Pamcary:</span> Há discussões sobre a possibilidade de utilizar um banco de dados próprio da Pamcary (que usa Postgre) como ponto de passagem ou intermediador (middleware) para a integração dos dados, em vez de hospedar esses dados no RD.</li>
                        <li><span class="text-white font-semibold">N8N:</span> Mencionado como uma possível ferramenta de integração intermediadora (middleware), caso o uso de um banco de dados próprio não seja a solução escolhida.</li>
                    </ul>
                </div>
    
                                <div>
                    <p class="text-lg font-bold text-blue-300 mb-2">Outras Integrações e Sistemas Relacionados</p>
                    <ul class="list-disc list-inside ml-4 space-y-1 mt-1">
                        <li><span class="text-white font-semibold">RD RD:</span> O cronograma de implementação menciona a integração "RD RD" para o agendamento de oportunidades.</li>
                        <li><span class="text-white font-semibold">CRM (Geral):</span> A arquitetura técnica da Pamcary é composta por camadas, incluindo Front End (usando Angular e Typescript), BackEnd For FrontEnd (BFF) (usando Java 17 e SpringBoot com DB2), e Serviços (API) (usando Java 17 e SpringBoot com Postgree). O RD, por ser o Front-end de vendas, se comunica com estas camadas e serviços internos.</li>
                        <li><span class="text-white font-semibold">MAAS / Keycloak:</span> A segurança e autenticação das APIs são feitas usando MAAS e Keycloak.</li>
                    </ul>
                </div>
    
            </div>
        </div>

    </div>
